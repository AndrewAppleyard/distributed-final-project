<!DOCTYPE html>
<html>
<head>
    <title>Distributed Systems Final</title>
</head>
<body data-backend-url="{{ backend_url }}">
<h1>Example API Data</h1>
<pre id="payload">test</pre>

<script>
    const configuredBackend = document.body.dataset.backendUrl;
    const backendBase = configuredBackend || "http://localhost:4000";
    const dataUrl = `${backendBase}/data`;

    async function loadData() {
        const output = document.getElementById("payload");
        if (!output) return;
        try {
            const res = await fetch(dataUrl);
            if (!res.ok) throw new Error((await res.text()));
            const data = await res.json();
            output.textContent = JSON.stringify(data, null, 2);
        } catch (err) {
            output.textContent = `Error: ${err.message}`;
        }
    }

    document.addEventListener("DOMContentLoaded", loadData);
</script>
</body>
</html>