{% extends "base.html" %}

{% block title %}Portfolio | Cardstock{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/portfolio.css') }}">
{% endblock %}

{% block content %}
<div class="portfolio-page">
    <div class="page-header">
        <div>
            <p class="eyebrow">Holdings Overview</p>
            <h1>Portfolio</h1>
            <p class="lede">Peek at your cardboard-friendly positions, cash, and ideas before placing your next paper trade.</p>
        </div>
        <button class="cardboard-btn icon-only" id="refresh-portfolio" aria-label="Refresh board">
            <i class="bi bi-arrow-counterclockwise"></i>
        </button>
    </div>

    <div class="stat-grid">
        <div class="card stat-card">
            <p class="label">Total equity</p>
            <h2 id="stat-equity">$0</h2>
            <p class="muted" id="stat-equity-change">Day move: --</p>
        </div>
        <div class="card stat-card">
            <p class="label">Available cash</p>
            <h2 id="stat-cash">$0</h2>
            <p class="muted">Dry powder for the next idea.</p>
        </div>
        <div class="card stat-card">
            <p class="label">Top mover</p>
            <h2 id="stat-mover">--</h2>
            <p class="muted" id="stat-mover-change">Waiting for an update.</p>
        </div>
    </div>

    <div class="card board positions-card">
        <div class="board-header">
            <div>
                <p class="eyebrow">Positions</p>
                <h3>Cardstock holdings</h3>
            </div>
            <button class="cardboard-btn ghost small" id="show-all-holdings">Show all</button>
        </div>
        <div class="positions-gallery">
            <button class="gallery-arrow left" aria-label="Scroll left" id="positions-left">&#9664;</button>
            <div id="positions-list" class="positions-track"></div>
            <button class="gallery-arrow right" aria-label="Scroll right" id="positions-right">&#9654;</button>
        </div>
    </div>
</div>

<div id="holdings-modal" class="modal hidden">
    <div class="modal-content wide">
        <div class="modal-header">
            <h3>All holdings</h3>
            <button class="close-btn" id="holdings-close" aria-label="Close">âœ•</button>
        </div>
        <div id="holdings-grid" class="holdings-grid"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/portfolio.js') }}"></script>
{% endblock %}
